(this["webpackJsonpreact-table-app"]=this["webpackJsonpreact-table-app"]||[]).push([[0],{44:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var r=a(2),c=a.n(r),n=a(34),s=a.n(n),i=(a(44),a(75)),j=a(14),l=a(48),d=a(30),b=a(28),u=Object(l.a)({apiKey:"AIzaSyBhiHbrO2qUvGDmGN3iX5u-SlpRK_EPlzU",authDomain:"table-app-e64c3.firebaseapp.com",databaseURL:"https://table-app-e64c3-default-rtdb.europe-west1.firebasedatabase.app",projectId:"table-app-e64c3",storageBucket:"table-app-e64c3.appspot.com",messagingSenderId:"102169979497",appId:"1:102169979497:web:c8dc8170bd6ce50f4850f8",measurementId:"G-6RC7ZQ1177"}),o=Object(d.b)(u),O=Object(b.b)(u),h=a(5),p=Object(r.createContext)();function x(){return Object(r.useContext)(p)}function m(e){var t=e.children,a=Object(r.useState)(),c=Object(j.a)(a,2),n=c[0],s=c[1],i=Object(r.useState)(!0),l=Object(j.a)(i,2),b=l[0],u=l[1];Object(r.useEffect)((function(){return o.onAuthStateChanged((function(e){s(e),u(!1)}))}),[]);var O={currentUser:n,signup:function(e,t){return Object(d.a)(o,e,t)},login:function(e,t){return Object(d.d)(o,e,t)},logout:function(){Object(d.e)(o)},resetPassword:function(e){return Object(d.c)(o,e)},updatedEmail:function(e){return Object(d.f)(n,e)},updatedPassword:function(e){return Object(d.g)(n,e)}};return Object(h.jsx)(p.Provider,{value:O,children:!b&&t})}var f=a(20),v=a(16),g=a(0),w=a.n(g),y=a(3),N=a(78),C=a(76),S=a(77),E=a(74);function q(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=x().login,c=Object(r.useState)(""),n=Object(j.a)(c,2),s=n[0],i=n[1],l=Object(r.useState)(!1),d=Object(j.a)(l,2),b=d[0],u=d[1],o=Object(v.g)();function O(){return(O=Object(y.a)(w.a.mark((function r(c){return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c.preventDefault(),r.prev=1,i(""),u(!0),r.next=6,a(e.current.value,t.current.value);case 6:u(!1),o.push("/dashboard"),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),i("Failed to log in");case 13:case"end":return r.stop()}}),r,null,[[1,10]])})))).apply(this,arguments)}return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N.a,{children:Object(h.jsxs)(N.a.Body,{children:[Object(h.jsx)("h2",{className:"text-center mb-4",children:"Log In"}),s&&Object(h.jsx)(C.a,{variant:"danger",children:s}),Object(h.jsxs)(S.a,{onSubmit:function(e){return O.apply(this,arguments)},children:[Object(h.jsxs)(S.a.Group,{id:"email",children:[Object(h.jsx)(S.a.Label,{children:"Email"}),Object(h.jsx)(S.a.Control,{type:"email",ref:e,required:!0})]}),Object(h.jsxs)(S.a.Group,{id:"password",children:[Object(h.jsx)(S.a.Label,{children:"Password"}),Object(h.jsx)(S.a.Control,{type:"password",ref:t,required:!0})]}),Object(h.jsx)(E.a,{disabled:b,className:"w-100 mt-3",type:"submit",children:"Log In"})]}),Object(h.jsx)("div",{className:"w-100 text-center mt-3",children:Object(h.jsx)(f.b,{to:"/forgot-password",children:"Forgot Password?"})})]})}),Object(h.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(h.jsx)(f.b,{to:"/signup",children:"Sign Up"})]})]})}function k(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=Object(r.useRef)(),c=x().signup,n=Object(r.useState)(""),s=Object(j.a)(n,2),i=s[0],l=s[1],d=Object(r.useState)(!1),b=Object(j.a)(d,2),u=b[0],o=b[1],O=Object(v.g)();function p(){return(p=Object(y.a)(w.a.mark((function r(n){return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),t.current.value===a.current.value){r.next=3;break}return r.abrupt("return",l("Passwords do not match"));case 3:return r.prev=3,l(""),o(!0),r.next=8,c(e.current.value,t.current.value);case 8:O.push("/"),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),l("Failed to create an account");case 14:o(!1);case 15:case"end":return r.stop()}}),r,null,[[3,11]])})))).apply(this,arguments)}return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N.a,{children:Object(h.jsxs)(N.a.Body,{children:[Object(h.jsx)("h2",{className:"text-center mb-4",children:"Sign Up"}),i&&Object(h.jsx)(C.a,{variant:"danger",children:i}),Object(h.jsxs)(S.a,{onSubmit:function(e){return p.apply(this,arguments)},children:[Object(h.jsxs)(S.a.Group,{id:"email",children:[Object(h.jsx)(S.a.Label,{children:"Email"}),Object(h.jsx)(S.a.Control,{type:"email",ref:e,required:!0})]}),Object(h.jsxs)(S.a.Group,{id:"password",children:[Object(h.jsx)(S.a.Label,{children:"Password"}),Object(h.jsx)(S.a.Control,{type:"password",ref:t,required:!0})]}),Object(h.jsxs)(S.a.Group,{id:"password-confirm",children:[Object(h.jsx)(S.a.Label,{children:"Password Confirmation"}),Object(h.jsx)(S.a.Control,{type:"password",ref:a,required:!0})]}),Object(h.jsx)(E.a,{disabled:u,className:"w-100 mt-3",type:"submit",children:"Sign Up"})]})]})}),Object(h.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(h.jsx)(f.b,{to:"/",children:"Log In"})]})]})}var P=a(32),L=a(53);var F=function(e){var t=e.contact,a=e.handleEditClick;return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:t.fullName}),Object(h.jsx)("td",{children:t.address}),Object(h.jsx)("td",{children:t.phoneNumber}),Object(h.jsx)("td",{children:t.email}),Object(h.jsx)("td",{children:Object(h.jsx)("button",{type:"button",onClick:function(e){return a(e,t)},children:"Edit"})})]})},D=function(e){var t=e.editFormData,a=e.handleEditFormChange;return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:Object(h.jsx)("input",{type:"text",name:"fullName",required:"required",placeholder:"Enter a name...",value:t.fullName,onChange:a})}),Object(h.jsx)("td",{children:Object(h.jsx)("input",{type:"text",name:"address",required:"required",placeholder:"Enter an address...",value:t.address,onChange:a})}),Object(h.jsx)("td",{children:Object(h.jsx)("input",{type:"text",name:"phoneNumber",required:"required",placeholder:"Enter a phone number...",value:t.phoneNumber,onChange:a})}),Object(h.jsx)("td",{children:Object(h.jsx)("input",{type:"email",name:"email",required:"required",placeholder:"Enter an email...",value:t.email,onChange:a})}),Object(h.jsx)("td",{children:Object(h.jsx)("button",{type:"submit",children:"Save"})})]})},R=function(){var e=x(),t=e.currentUser,a=e.logout,c=Object(r.useState)(""),n=Object(j.a)(c,2),s=n[0],i=n[1],l=Object(v.g)(),d=Object(b.e)(O,"Lists/".concat(t.uid)),u=Object(r.useState)([]),o=Object(j.a)(u,2),p=o[0],m=o[1],g=Object(r.useState)({fullName:"",address:"",phoneNumber:"",email:""}),C=Object(j.a)(g,2),S=C[0],q=C[1],k=Object(r.useState)({fullName:"",address:"",phoneNumber:"",email:""}),R=Object(j.a)(k,2),U=R[0],G=R[1],A=Object(r.useState)(null),I=Object(j.a)(A,2),B=I[0],z=I[1];Object(r.useEffect)((function(){Object(b.c)(d,(function(e){var t=e.val();try{i("");var a=Object.values(t);m(a)}catch(r){i("Database is empty"),console.log(s)}}))}),[]);var J=function(e){e.preventDefault();var t=e.target.getAttribute("name"),a=e.target.value,r=Object(P.a)({},S);r[t]=a,q(r)},K=function(e){e.preventDefault();var t=e.target.getAttribute("name"),a=e.target.value,r=Object(P.a)({},U);r[t]=a,G(r)},T=function(e,t){e.preventDefault(),z(t.id);var a={fullName:t.fullName,address:t.address,phoneNumber:t.phoneNumber,email:t.email};G(a)};function H(){return(H=Object(y.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(""),e.prev=1,e.next=4,a();case 4:l.push("/"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),i("Failed to log out"),console.log(s);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N.a,{children:Object(h.jsxs)(N.a.Body,{className:"text-center mt-2",children:[Object(h.jsxs)("h6",{children:["Email: ",t.email]}),Object(h.jsx)(f.b,{to:"/update-email",children:"Update Email/Password"}),Object(h.jsx)("div",{children:Object(h.jsx)(E.a,{variant:"link",onClick:function(){return H.apply(this,arguments)},children:"Log Out"})})]})}),Object(h.jsx)("div",{style:{width:"800px",marginTop:6},children:Object(h.jsx)("form",{onSubmit:function(e){e.preventDefault();var t={id:B,fullName:U.fullName,address:U.address,phoneNumber:U.phoneNumber,email:U.email};Object(b.a)(d).then((function(e){if(e.exists())for(var a=e.val(),r=0,c=Object.entries(a);r<c.length;r++){var n=Object(j.a)(c[r],2),s=n[0];if(n[1].id===B){var i={};return i[s]=t,Object(b.g)(d,i)}}else console.log("No data available")})).catch((function(e){console.log(e)})),z(null)},children:Object(h.jsxs)("table",{children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Name"}),Object(h.jsx)("th",{children:"Address"}),Object(h.jsx)("th",{children:"Phone Number"}),Object(h.jsx)("th",{children:"Email"}),Object(h.jsx)("th",{children:"Actions"})]})}),Object(h.jsx)("tbody",{children:p.map((function(e){return Object(h.jsx)(r.Fragment,{children:e.id===B?Object(h.jsx)(D,{editFormData:U,handleEditFormChange:K}):Object(h.jsx)(F,{contact:e,handleEditClick:T})},e.id)}))})]})})}),Object(h.jsxs)("div",{style:{width:"800px",marginTop:6},children:[Object(h.jsx)("h3",{children:"Add a Contact"}),Object(h.jsxs)("form",{className:"form-container",children:[Object(h.jsx)("input",{type:"text",name:"fullName",required:"required",placeholder:"Enter a name...",onChange:J}),Object(h.jsx)("input",{type:"text",name:"address",required:"required",placeholder:"Enter an address...",onChange:J}),Object(h.jsx)("input",{type:"text",name:"phoneNumber",required:"required",placeholder:"Enter a phone number...",onChange:J}),Object(h.jsx)("input",{type:"email",name:"email",required:"required",placeholder:"Enter an email...",onChange:J}),Object(h.jsx)("button",{type:"reset",onClick:function(e){e.preventDefault();var t={id:Object(L.a)(),fullName:S.fullName,address:S.address,phoneNumber:S.phoneNumber,email:S.email},a=Object(b.d)(d);Object(b.f)(a,t),Object(b.c)(d,(function(e){var t=e.val(),a=Object.values(t);m(a)}))},children:"Add"})]})]})]})},U=a(54),G=["component"];function A(e){var t=e.component,a=Object(U.a)(e,G),r=x().currentUser;return Object(h.jsx)(v.b,Object(P.a)(Object(P.a)({},a),{},{render:function(e){return r?Object(h.jsx)(t,Object(P.a)({},e)):Object(h.jsx)(v.a,{to:"/"})}}))}function I(){var e=Object(r.useRef)(),t=x().resetPassword,a=Object(r.useState)(""),c=Object(j.a)(a,2),n=c[0],s=c[1],i=Object(r.useState)(!1),l=Object(j.a)(i,2),d=l[0],b=l[1],u=Object(r.useState)(""),o=Object(j.a)(u,2),O=o[0],p=o[1];function m(){return(m=Object(y.a)(w.a.mark((function a(r){return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.prev=1,p(""),s(""),b(!0),a.next=7,t(e.current.value);case 7:p("Check your inbox for further instructions"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),s("Failed to reset password");case 13:b(!1);case 14:case"end":return a.stop()}}),a,null,[[1,10]])})))).apply(this,arguments)}return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N.a,{children:Object(h.jsxs)(N.a.Body,{children:[Object(h.jsx)("h2",{className:"text-center mb-4",children:"Password Reset"}),n&&Object(h.jsx)(C.a,{variant:"danger",children:n}),O&&Object(h.jsx)(C.a,{variant:"info",children:O}),Object(h.jsxs)(S.a,{onSubmit:function(e){return m.apply(this,arguments)},children:[Object(h.jsxs)(S.a.Group,{id:"email",children:[Object(h.jsx)(S.a.Label,{children:"Email"}),Object(h.jsx)(S.a.Control,{type:"email",ref:e,required:!0})]}),Object(h.jsx)(E.a,{disabled:d,className:"w-100 mt-3",type:"submit",children:"Reset Password"})]}),Object(h.jsx)("div",{className:"w-100 text-center mt-3",children:Object(h.jsx)(f.b,{to:"/",children:"Login"})})]})}),Object(h.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(h.jsx)(f.b,{to:"/signup",children:"Sign Up"})]})]})}function B(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=Object(r.useRef)(),c=x(),n=c.currentUser,s=c.updatedEmail,i=c.updatedPassword,l=Object(r.useState)(""),d=Object(j.a)(l,2),b=d[0],u=d[1],o=Object(r.useState)(!1),O=Object(j.a)(o,2),p=O[0],m=O[1],g=Object(v.g)();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N.a,{children:Object(h.jsxs)(N.a.Body,{children:[Object(h.jsx)("h2",{className:"text-center mb-4",children:"Update Email/Password"}),b&&Object(h.jsx)(C.a,{variant:"danger",children:b}),Object(h.jsxs)(S.a,{onSubmit:function(r){if(r.preventDefault(),t.current.value!==a.current.value)return u("Passwords do not match");var c=[];m(!0),u(""),e.current.value!==n.email&&c.push(s(e.current.value)),t.current.value&&c.push(i(t.current.value)),Promise.all(c).then((function(){g.push("/dashboard")})).catch((function(){u("Failed to update")})).finally(),m(!1)},children:[Object(h.jsxs)(S.a.Group,{id:"email",children:[Object(h.jsx)(S.a.Label,{children:"Email"}),Object(h.jsx)(S.a.Control,{type:"email",ref:e,required:!0,defaultValue:n.email})]}),Object(h.jsxs)(S.a.Group,{id:"password",children:[Object(h.jsx)(S.a.Label,{children:"Password"}),Object(h.jsx)(S.a.Control,{type:"password",ref:t,placeholder:"Leave blank to keep the same"})]}),Object(h.jsxs)(S.a.Group,{id:"password-confirm",children:[Object(h.jsx)(S.a.Label,{children:"Password Confirmation"}),Object(h.jsx)(S.a.Control,{type:"password",ref:a,placeholder:"Leave blank to keep the same"})]}),Object(h.jsx)(E.a,{disabled:p,className:"w-100 mt-3",type:"submit",children:"Update"})]})]})}),Object(h.jsx)("div",{className:"w-100 text-center mt-2",children:Object(h.jsx)(f.b,{to:"/dashboard",children:"Cancel"})})]})}var z=function(){return Object(h.jsx)(m,{children:Object(h.jsx)(i.a,{style:{width:"auto"},children:Object(h.jsx)("div",{style:{width:"400px"},children:Object(h.jsx)(f.a,{children:Object(h.jsx)(m,{children:Object(h.jsxs)(v.d,{children:[Object(h.jsx)(A,{path:"/dashboard",component:R}),Object(h.jsx)(v.b,{path:"/signup",component:k}),Object(h.jsx)(v.b,{exact:!0,path:"/",component:q}),Object(h.jsx)(v.b,{path:"/forgot-password",component:I}),Object(h.jsx)(v.b,{path:"/update-email",component:B})]})})})})})})};a(71);s.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(z,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.bf3c202b.chunk.js.map